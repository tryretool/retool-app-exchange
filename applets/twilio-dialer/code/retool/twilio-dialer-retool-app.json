{"uuid":"9cf3009e-f335-11ec-84e1-53690545aee8","page":{"id":79078,"data":{"appState":"[\"~#iR\",[\"^ \",\"n\",\"appTemplate\",\"v\",[\"^ \",\"isFetching\",false,\"plugins\",[\"~#iOM\",[\"callButton\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"callButton\",\"type\",\"widget\",\"subtype\",\"ButtonWidget2\",\"namespace\",null,\"resourceName\",null,\"resourceDisplayName\",null,\"template\",[\"^3\",[\"horizontalAlign\",\"stretch\",\"clickable\",false,\"iconAfter\",\"\",\"submitTargetId\",null,\"hidden\",false,\"text\",\"{{ twilioDevice.model.status === \\\"ready_for_call\\\" ?  \\\"Call\\\" : \\\"End\\\" }}\",\"showInEditor\",false,\"tooltipText\",\"\",\"style\",[\"^3\",[\"background\",\"{{ twilioDevice.model.status === \\\"ready_for_call\\\" ?  theme.success : theme.danger }}\"]],\"styleVariant\",\"solid\",\"submit\",false,\"iconBefore\",\"{{ twilioDevice.model.status === \\\"ready_for_call\\\" ?  \\\"/icon:bold/phone-telephone\\\"  :  \\\"/icon:bold/entertainment-control-button-stop\\\"  }}\",\"events\",[\"~#iL\",[[\"^3\",[\"event\",\"click\",\"type\",\"widget\",\"method\",\"updateModel\",\"pluginId\",\"twilioDevice\",\"targetId\",null,\"params\",[\"^3\",[\"model\",\"{{ twilioDevice.model.status === \\\"ready_for_call\\\" ? {phoneNumber: phoneNumberEntry.value, status: \\\"retool_called\\\"} : {status: \\\"retool_ended\\\"} }}\"]],\"waitType\",\"debounce\",\"waitMs\",\"0\"]],[\"^3\",[\"event\",\"click\",\"type\",\"widget\",\"method\",\"setHidden\",\"pluginId\",\"welcomeText\",\"targetId\",null,\"params\",[\"^3\",[]],\"waitType\",\"debounce\",\"waitMs\",\"0\"]]]],\"loading\",false,\"loaderPosition\",\"auto\",\"disabled\",\"{{phoneNumberEntry.validationMessage || getVoiceToken.error}}\",\"maintainSpaceWhenHidden\",false]],\"style\",[\"^3\",[]],\"position2\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"container\",\"\",\"rowGroup\",\"body\",\"subcontainer\",\"\",\"row\",0.6000000000000002,\"col\",10,\"height\",1,\"width\",2,\"tabNum\",0]]],\"mobilePosition2\",null,\"mobileAppPosition\",null,\"tabIndex\",null,\"^=\",\"\",\"createdAt\",\"~m1656103970637\",\"updatedAt\",\"~m1666196727621\",\"folder\",\"\",\"screen\",null]]],\"getVoiceToken\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"getVoiceToken\",\"^4\",\"datasource\",\"^5\",\"RESTQuery\",\"^6\",null,\"^7\",\"6c59b7bd-9a66-49da-aa46-59d336560a01\",\"^8\",\"Twilio Voice Token\",\"^9\",[\"^3\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"body\",\"\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",true,\"paginationPaginationField\",\"\",\"headers\",\"\",\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"privateParams\",[\"^:\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^3\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"cookies\",\"\",\"metadata\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",null,\"watchedParams\",[\"^:\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^3\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^:\",[[\"^3\",[\"event\",\"success\",\"type\",\"widget\",\"method\",\"updateModel\",\"pluginId\",\"twilioDevice\",\"targetId\",null,\"params\",[\"^3\",[\"model\",\"{\\n  data: {{getVoiceToken.data}},\\n}\"]],\"waitType\",\"debounce\",\"waitMs\",\"0\"]]]],\"queryTimeout\",\"10000\",\"requireConfirmation\",false,\"type\",\"GET\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^:\",[]],\"bodyType\",\"json\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^;\",null,\"^<\",null,\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1656023746140\",\"^G\",\"~m1657759435164\",\"^H\",\"\",\"^I\",null]]],\"leadsTable\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"leadsTable\",\"^4\",\"widget\",\"^5\",\"TableWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"showCustomButton\",false,\"sortMappedValue\",[\"^3\",[]],\"_filteredSortedRenderedDataWithTypes\",null,\"heightType\",\"fixed\",\"normalizedData\",null,\"saveChangesDisabled\",\"\",\"columnTypeProperties\",[\"^3\",[\"phoneNumber\",[\"^3\",[]]]],\"columnWidths\",[\"^:\",[]],\"showSummaryFooter\",false,\"disableRowSelectInteraction\",false,\"columnWidthsMobile\",[\"^:\",[]],\"hasNextAfterCursor\",\"\",\"columnTypeSpecificExtras\",[\"^3\",[]],\"onRowAdded\",\"\",\"columnHeaderNames\",[\"^3\",[]],\"alwaysShowPaginator\",false,\"columnColors\",[\"^3\",[\"id\",\"\",\"name\",\"\",\"email\",\"\",\"phoneNumber\",\"\",\"phoneNumer\",\"\",\"phoneNumebr\",\"\",\"sales\",\"\"]],\"columnFrozenAlignments\",[\"^3\",[]],\"allowMultiRowSelect\",false,\"columnFormats\",[\"^3\",[\"phoneNumber\",\"TextDataCell\"]],\"columnRestrictedEditing\",[\"^3\",[]],\"showFilterButton\",true,\"_columnVisibility\",[\"^3\",[\"id\",true,\"name\",true,\"email\",true,\"phoneNumber\",true]],\"_columnSummaryTypes\",[\"^3\",[\"phoneNumber\",\"\"]],\"_columnsWithLegacyBackgroundColor\",[\"~#iOS\",[]],\"showAddRowButton\",false,\"_unfilteredSelectedIndex\",null,\"nextBeforeCursor\",\"\",\"columnVisibility\",[\"^3\",[\"id\",true,\"name\",true,\"email\",true,\"phoneNumber\",true]],\"selectedPageIndex\",\"0\",\"applyDynamicSettingsToColumnOrder\",true,\"rowColor\",[],\"actionButtonColumnName\",\"Actions\",\"resetAfterSave\",true,\"filterStackType\",\"and\",\"downloadRawData\",false,\"showFetchingIndicator\",true,\"serverPaginated\",false,\"data\",\"{{[{\\n  \\\"id\\\": 1,\\n  \\\"name\\\": \\\"Evan Weiss\\\",\\n  \\\"email\\\": \\\"evan@weiss.com\\\",\\n  \\\"phoneNumber\\\": \\\"+19255055511\\\"\\n}, {\\n  \\\"id\\\": 2,\\n  \\\"name\\\": \\\"Sue Shei\\\",\\n  \\\"email\\\": \\\"sueshei@example.com\\\",\\n  \\\"phoneNumber\\\": \\\"+19255593244\\\"\\n}, {\\n  \\\"id\\\": 3,\\n  \\\"name\\\": \\\"Jason Response\\\",\\n  \\\"email\\\": \\\"jason@response.com\\\",\\n  \\\"phoneNumber\\\": \\\"+19255595266\\\"\\n}, {\\n  \\\"id\\\": 4,\\n  \\\"name\\\": \\\"Cher Actor\\\",\\n  \\\"email\\\": \\\"cher@example.com\\\",\\n  \\\"phoneNumber\\\": \\\"+19255590643\\\"\\n}, {\\n  \\\"id\\\": 5,\\n  \\\"name\\\": \\\"Erica Widget\\\",\\n  \\\"email\\\": \\\"erica@widget.org\\\",\\n  \\\"phoneNumber\\\": \\\"+19255590604\\\"\\n}]}}\",\"displayedData\",null,\"actionButtons\",[\"^:\",[]],\"actionButtonSelectsRow\",true,\"selectRowByDefault\",true,\"defaultSortByColumn\",\"\",\"paginationOffset\",0,\"columnAlignment\",[\"^3\",[\"phoneNumber\",\"left\"]],\"columnSummaries\",[\"^ \"],\"showBoxShadow\",true,\"sortedDesc\",false,\"customButtonName\",\"\",\"columnMappersRenderAsHTML\",[\"^3\",[]],\"showRefreshButton\",true,\"pageSize\",5,\"useDynamicColumnSettings\",false,\"actionButtonPosition\",\"left\",\"dynamicRowHeights\",false,\"bulkUpdateAction\",\"\",\"afterCursor\",\"\",\"onCustomButtonPressQueryName\",\"\",\"changeSet\",[\"^ \"],\"sortedColumn\",\"\",\"_columnSummaryValues\",[\"^3\",[\"phoneNumber\",\"\"]],\"checkboxRowSelect\",true,\"_compatibilityMode\",false,\"showColumnBorders\",false,\"clearSelectionLabel\",\"Clear selection\",\"_renderedDataWithTypes\",null,\"columnAllowOverflow\",[\"^3\",[]],\"beforeCursor\",\"\",\"serverPaginationType\",\"limitOffsetBased\",\"onRowSelect\",\"\",\"showDownloadButton\",true,\"selectedIndex\",null,\"defaultSortDescending\",false,\"_sortedDisplayedDataIndices\",null,\"dynamicColumnSettings\",null,\"totalRowCount\",\"\",\"recordUpdates\",[],\"newRow\",null,\"emptyMessage\",\"No rows found\",\"columnEditable\",[\"^3\",[]],\"_viewerColumnSummaryTypes\",[\"^ \"],\"filters\",[],\"displayedDataIndices\",null,\"disableSorting\",[\"^3\",[]],\"columnMappers\",[\"^3\",[]],\"showClearSelection\",false,\"doubleClickToEdit\",true,\"overflowType\",\"pagination\",\"_reverseSortedDisplayedDataIndices\",null,\"showTableBorder\",true,\"selectedCell\",[\"^ \",\"index\",null,\"data\",null,\"columnName\",null],\"columns\",[\"^:\",[\"id\",\"name\",\"email\",\"phoneNumber\"]],\"defaultSelectedRow\",\"first\",\"freezeActionButtonColumns\",false,\"sort\",null,\"_columns\",[\"^:\",[\"id\",\"name\",\"email\",\"phoneNumber\"]],\"sortByRawValue\",[\"^3\",[]],\"calculatedColumns\",[\"^:\",[]],\"selectedRow\",[\"^ \",\"^K\",null,\"^L\",null],\"showPaginationOnTop\",false,\"_reverseDisplayedDataIndices\",null,\"nextAfterCursor\",\"\",\"useCompactMode\",false]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",1.2000000000000002,\"col\",0,\"^@\",8,\"^A\",8,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1656117436953\",\"^G\",\"~m1657759435168\",\"^H\",\"\",\"^I\",null]]],\"leadsTableTitle\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"leadsTableTitle\",\"^4\",\"widget\",\"^5\",\"TextWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"_defaultValue\",\"\",\"tooltipText\",\"\",\"value\",\"## Leads\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",0,\"col\",0,\"^@\",0.6,\"^A\",1,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1656117442328\",\"^G\",\"~m1657759435168\",\"^H\",\"\",\"^I\",null]]],\"phoneNumberEntry\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"phoneNumberEntry\",\"^4\",\"widget\",\"^5\",\"TextInputWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"spellCheck\",false,\"readOnly\",\"\",\"iconAfter\",\"\",\"showCharacterCount\",false,\"autoComplete\",false,\"maxLength\",null,\"hidden\",false,\"customValidation\",\"{{/^\\\\+1[0-9]{10}$/.test(phoneNumberEntry.value) ? '' : 'Please enter a 9-digit US phone number prefixed with \\\"+1\\\"'}}\",\"patternType\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"_defaultValue\",\"\",\"showClear\",false,\"pattern\",\"\",\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"{{leadsTable.selectedRow.data.phoneNumber}}\",\"labelCaption\",\"\",\"labelWidth\",\"33\",\"autoFill\",\"\",\"placeholder\",\"Phone number\",\"label\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"\",\"minLength\",null,\"inputTooltip\",\"\",\"events\",[\"^3\",[]],\"autoCapitalize\",\"none\",\"loading\",false,\"disabled\",\"{{ getVoiceToken.error}}\",\"labelPosition\",\"left\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",0.6000000000000002,\"col\",8,\"^@\",1,\"^A\",2,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1656117765580\",\"^G\",\"~m1666196741721\",\"^H\",\"\",\"^I\",null]]],\"twilioDevice\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"twilioDevice\",\"^4\",\"widget\",\"^5\",\"CustomComponentWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"allowTopNavigation\",false,\"allowDownloads\",false,\"allowFullscreen\",false,\"allowForms\",false,\"model\",\"{status: \\\"ready_for_call\\\"}\",\"hidden\",\"\",\"allowCamera\",false,\"allowModals\",false,\"allowPopups\",false,\"iframeCode\",\"<!-- Retool custom component model\\n{\\n  status (string): \\\"ready_for_call\\\" | \\\"retool_called\\\" | \\\"retool_ended\\\",\\n  phoneNumber (string): < a ten-digit phone number, prefixed with \\\"+\\\" >,\\n  data (object): < a Twilio JWT containing a voice access token >,\\n}\\n-->\\n\\n<!DOCTYPE html>\\n<html>\\n  <head>\\n    <title>Embedded Twilio Dialer for Retool</title>\\n    <style>\\n      body,\\n      p {\\n        padding: 0;\\n        margin: 0;\\n      }\\n\\n      body {\\n        background: #272726;\\n      }\\n\\n      label {\\n        text-align: left;\\n        font-family: Helvetica, sans-serif;\\n        font-size: 1.25em;\\n        color: #777776;\\n        display: block;\\n      }\\n\\n      div#controls {\\n        padding: 1em;\\n        margin: 0 auto;\\n      }\\n\\n      div#controls div#call-controls,\\n      div#controls div#info {\\n        margin: 0 1.5em;\\n        text-align: center;\\n      }\\n\\n      div#controls div#log {\\n        border: 1px solid #686865;\\n        width: 100%;\\n        height: 9.5em;\\n        text-align: left;\\n        overflow-y: scroll;\\n      }\\n\\n      div#controls div#log p {\\n        color: #686865;\\n        font-family: \\\"Share Tech Mono\\\", \\\"Courier New\\\", Courier, fixed-width;\\n        font-size: 1.25em;\\n        line-height: 1.25em;\\n        margin-left: 1em;\\n        text-indent: -1.25em;\\n        width: 90%;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div id=\\\"controls\\\">\\n      <div id=\\\"log\\\"></div>\\n    </div>\\n\\n    <!-- Twilio's voice SDK is not available via Twilio CDN, so you must host it yourself: https://www.twilio.com/docs/voice/sdks/javascript#installation -->\\n    <script\\n      type=\\\"text/javascript\\\"\\n      src=\\\"https://retool-twilio.s3.amazonaws.com/twilio.min.js\\\"\\n    ></script>\\n    <script>\\n      /* eslint-disable */\\n      // Activity log\\n      function log(message) {\\n        var logDiv = document.getElementById(\\\"log\\\");\\n        logDiv.innerHTML += \\\"<p>&gt;&nbsp;\\\" + message + \\\"</p>\\\";\\n        logDiv.scrollTop = logDiv.scrollHeight;\\n      }\\n\\n      // Initialize variables to be used inside of the window.Retool.subscribe function\\n      var device;\\n      var currentPhoneNumber;\\n      var call;\\n\\n      // window.Retool.subscribe is evaluated whenever the Retool custom component model changes: https://docs.retool.com/docs/custom-components#non-react-javascript\\n      window.Retool.subscribe(async function (model) {\\n        // subscribes to model updates\\n        // all model values can be accessed here\\n        \\n        if (model.data && model.data.token && !device) { // If a voice token is passed into the model, and the device object is not yet available...\\n          device = new Twilio.Device(model.data.token); // Instantiate a new Device: https://www.twilio.com/docs/voice/sdks/javascript/twiliodevice#instantiate-a-device\\n\\n          // Set event handlers on the new Device which trigger log messages: https://www.twilio.com/docs/voice/sdks/javascript/twiliodevice#deviceoneventname-listener\\n          device.on(\\\"error\\\", (error) => {\\n            log(\\\"Twilio.Device Error: \\\" + error.message);\\n          });\\n        }\\n\\n        if (\\n          model.phoneNumber &&\\n          model.status === \\\"retool_called\\\" &&\\n          currentPhoneNumber != model.phoneNumber\\n        ) { // If a phone number is passed into the model, and the user clicked the Call button in the UI...\\n          currentPhoneNumber = model.phoneNumber;\\n\\n          // get the phone number to connect the call to\\n          var params = { params: { To: currentPhoneNumber } };\\n\\n          log(\\\"Calling \\\" + currentPhoneNumber + \\\"...\\\");\\n          if (device) {\\n            call = await device.connect(params); // Instantiate a new Call object, passing in the phone number: https://www.twilio.com/docs/voice/sdks/javascript/twiliodevice#deviceconnectconnectoptions\\n\\n            // Set event handlers on the new Call: https://www.twilio.com/docs/voice/sdks/javascript/twiliocall#events\\n            call.on(\\\"accept\\\", (call) => {\\n              log(\\\"Successfully established call!\\\");\\n            });\\n\\n            call.on(\\\"disconnect\\\", (call) => { // When the call is disconnected (either by the Retool user or the called party)...\\n              log(\\\"Call ended.\\\");\\n              currentPhoneNumber = null; // Set the currentPhoneNumber back to null and...\\n              window.Retool.modelUpdate({ status: \\\"ready_for_call\\\" }); // Update the model with new status: https://docs.retool.com/docs/custom-components#non-react-javascript\\n            });\\n\\n            if (call.status() === \\\"connecting\\\") {\\n              log(\\\"Connecting...\\\");\\n            }\\n          }\\n        }\\n\\n        if (model.status === \\\"retool_ended\\\") { // If the user clicked the End button in the UI... \\n          log(\\\"Hanging up...\\\");\\n          if (device) {\\n            device.disconnectAll(); // Disconnect the call: https://www.twilio.com/docs/voice/sdks/javascript/twiliodevice#devicedisconnectall\\n          }\\n        }\\n      });\\n    </script>\\n  </body>\\n</html>\\n\",\"allowMicrophone\",true,\"allowSameOrigin\",true,\"allowPopupsToEscapeSandbox\",false,\"allowPayment\",false,\"allowGeolocation\",false]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",1.5999999999999983,\"col\",8,\"^@\",5.000000000000002,\"^A\",4,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1656018956100\",\"^G\",\"~m1657759435169\",\"^H\",\"\",\"^I\",null]]],\"welcomeText\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"welcomeText\",\"^4\",\"widget\",\"^5\",\"TextWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"_defaultValue\",\"\",\"tooltipText\",\"\",\"value\",\"**Welcome to the Twilio dialer demo! Select a lead from the table or enter a phone number to call below!**\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",true]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",0,\"col\",8,\"^@\",0.6,\"^A\",4,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1657130540164\",\"^G\",\"~m1657759435169\",\"^H\",\"\",\"^I\",null]]],\"$main\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"$main\",\"^4\",\"frame\",\"^5\",\"Frame\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"type\",\"main\",\"sticky\",false]],\"^;\",[\"^3\",[]],\"^<\",null,\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1662507702498\",\"^G\",\"~m1662507702498\",\"^H\",\"\",\"^I\",null]]],\"getVoiceTokenError\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"getVoiceTokenError\",\"^4\",\"widget\",\"^5\",\"AlertWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"valueToCopy\",\"\",\"internalUrlHashParams\",\"\",\"hidden\",\"{{!getVoiceToken.error}}\",\"exportFileType\",\"csv\",\"buttonType\",\"action\",\"url\",\"\",\"newWindow\",false,\"exportQuery\",\"\",\"action\",\"\",\"internalUrlQuery\",\"\",\"internalUrlPath\",\"\",\"title\",\"getVoiceToken query failed\",\"type\",\"error\",\"exportFileName\",\"\",\"description\",\"{{getVoiceToken.error}}\",\"buttonText\",\"\"]],\"^;\",[\"^3\",[]],\"^<\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^=\",\"\",\"^>\",\"body\",\"^?\",\"\",\"row\",0,\"col\",1,\"^@\",1,\"^A\",7,\"^B\",0]]],\"^C\",null,\"^D\",null,\"^E\",null,\"^=\",\"\",\"^F\",\"~m1666196786615\",\"^G\",\"~m1666196895174\",\"^H\",\"\",\"^I\",null]]]]],\"^F\",null,\"version\",\"2.97.4\",\"appThemeId\",null,\"preloadedAppJavaScript\",\"$(function () {\\n    var device;\\n\\n    log(\\\"Requesting Access Token...\\\");\\n    // Using a relative link to access the Voice Token function\\n    $.getJSON(\\\"./token\\\")\\n        .then(function (data) {\\n            log(\\\"Got a token.\\\");\\n            console.log(\\\"Token: \\\" + data.token);\\n\\n            // Setup Twilio.Device\\n            device = new Twilio.Device(data.token, {\\n                // Set Opus as our preferred codec. Opus generally performs better, requiring less bandwidth and\\n                // providing better audio quality in restrained network conditions. Opus will be default in 2.0.\\n                codecPreferences: [\\\"opus\\\", \\\"pcmu\\\"],\\n                // Use fake DTMF tones client-side. Real tones are still sent to the other end of the call,\\n                // but the client-side DTMF tones are fake. This prevents the local mic capturing the DTMF tone\\n                // a second time and sending the tone twice. This will be default in 2.0.\\n                fakeLocalDTMF: true,\\n                // Use `enableRingingState` to enable the device to emit the `ringing`\\n                // state. The TwiML backend also needs to have the attribute\\n                // `answerOnBridge` also set to true in the `Dial` verb. This option\\n                // changes the behavior of the SDK to consider a call `ringing` starting\\n                // from the connection to the TwiML backend to when the recipient of\\n                // the `Dial` verb answers.\\n                enableRingingState: true,\\n                debug: true,\\n            });\\n\\n            device.on(\\\"ready\\\", function (device) {\\n                log(\\\"Twilio.Device Ready!\\\");\\n            });\\n\\n            device.on(\\\"error\\\", function (error) {\\n                log(\\\"Twilio.Device Error: \\\" + error.message);\\n            });\\n\\n            device.on(\\\"connect\\\", function (conn) {\\n                log('Successfully established call ! ');\\n                $('#modal-call-in-progress').modal('show')\\n            });\\n\\n            device.on(\\\"disconnect\\\", function (conn) {\\n                log(\\\"Call ended.\\\");\\n                $('.modal').modal('hide')\\n            });\\n\\n        })\\n        .catch(function (err) {\\n            console.log(err);\\n            log(\\\"Could not get a token from server!\\\");\\n        });\\n\\n    // Bind button to make call\\n    $('#btnDial').bind('click', function () {\\n        $('#modal-dial').modal('hide')\\n\\n        // get the phone number to connect the call to\\n        var params = {\\n            To: document.getElementById(\\\"phoneNumber\\\").value\\n        };\\n\\n        // output destination number\\n        $(\\\"#txtPhoneNumber\\\").text(params.To)\\n        \\n\\n        console.log(\\\"Calling \\\" + params.To + \\\"...\\\");\\n        if (device) {\\n            var outgoingConnection = device.connect(params);\\n            outgoingConnection.on(\\\"ringing\\\", function () {\\n                log(\\\"Ringing...\\\");\\n            });\\n        }\\n\\n    })\\n\\n    // Bind button to hangup call\\n\\n    $('.btnHangUp').bind('click', function () {\\n        $('.modal').modal('hide')\\n        log(\\\"Hanging up...\\\");\\n        if (device) {\\n            device.disconnectAll();\\n        }\\n    })\\n\\n    // Activity log\\n    function log(message) {\\n        var logDiv = document.getElementById(\\\"log\\\");\\n        logDiv.innerHTML += \\\"<p>&gt;&nbsp;\\\" + message + \\\"</p>\\\";\\n        logDiv.scrollTop = logDiv.scrollHeight;\\n    }\\n\\n});\\n\",\"preloadedAppJSLinks\",[],\"testEntities\",[],\"tests\",[],\"appStyles\",\"\",\"responsiveLayoutDisabled\",false,\"loadingIndicatorsDisabled\",false,\"urlFragmentDefinitions\",[\"^:\",[]],\"pageLoadValueOverrides\",[\"^:\",[]],\"customDocumentTitle\",\"\",\"customDocumentTitleEnabled\",false,\"customShortcuts\",[],\"isGlobalWidget\",false,\"isMobileApp\",false,\"multiScreenMobileApp\",false,\"folders\",[\"^:\",[]],\"queryStatusVisibility\",true,\"markdownLinkBehavior\",\"auto\",\"inAppRetoolPillAppearance\",\"NO_OVERRIDE\",\"rootScreen\",null,\"instrumentationEnabled\",false,\"experimentalPerfFeatures\",[\"^ \",\"batchCommitModelEnabled\",false,\"skipDepCycleCheckingEnabled\",false,\"serverDepGraphEnabled\",false,\"useRuntimeV2\",false],\"experimentalDataTabEnabled\",false]]]"},"changesRecord":[{"type":"WIDGET_REPOSITION2","payload":{"moves":[{"move":{"col":0,"row":-1,"width":0,"height":0},"moveType":"keyboard","widgetIds":["phoneNumberEntry","callButton","twilioDevice"]}],"largeScreen":true},"hideChangelogEntry":false},{"type":"WIDGET_REPOSITION2","payload":{"moves":[{"move":{"col":0,"row":-1,"width":0,"height":0},"moveType":"keyboard","widgetIds":["phoneNumberEntry","callButton","twilioDevice"]}],"largeScreen":true},"hideChangelogEntry":false},{"type":"WIDGET_REPOSITION2","payload":{"moves":[{"move":{"col":0,"row":-1,"width":0,"height":0},"moveType":"keyboard","widgetIds":["phoneNumberEntry","callButton","twilioDevice"]}],"largeScreen":true},"hideChangelogEntry":false},{"type":"WIDGET_REPOSITION2","payload":{"moves":[{"move":{"col":0,"row":-1,"width":0,"height":0},"moveType":"keyboard","widgetIds":["phoneNumberEntry","callButton","twilioDevice"]}],"largeScreen":true},"hideChangelogEntry":false},{"type":"WIDGET_REPOSITION2","payload":{"moves":[{"move":{"col":0,"row":-1,"width":0,"height":0},"moveType":"keyboard","widgetIds":["phoneNumberEntry","callButton","twilioDevice"]},{"move":{"row":-3,"height":0},"widgetIds":["phoneNumberEntry"]},{"move":{"row":-3,"height":0},"widgetIds":["callButton"]},{"move":{"row":-3,"height":0},"widgetIds":["twilioDevice"]}],"largeScreen":true},"hideChangelogEntry":false}],"gitSha":"49c209d35dd6f6405450a4162a84caddf1b6afd0","checksum":null,"createdAt":"2022-10-19T16:28:30.813Z","updatedAt":"2022-10-19T16:31:43.679Z","pageId":343,"userId":57,"branchId":"c930888a-bbea-48c4-a2e1-536965147038"},"modules":{}}