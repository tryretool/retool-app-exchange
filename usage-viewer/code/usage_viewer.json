{"uuid":"30bdc4b6-c745-11ec-98dd-27532a4d4216","page":{"id":25486,"data":{"appState":"[\"~#iR\",[\"^ \",\"n\",\"appTemplate\",\"v\",[\"^ \",\"isFetching\",false,\"plugins\",[\"~#iOM\",[\"topApps\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"topApps\",\"type\",\"function\",\"subtype\",\"Function\",\"namespace\",null,\"resourceName\",null,\"resourceDisplayName\",null,\"template\",[\"^3\",[\"funcBody\",\"// Calculate top 10 apps by app views and by queries, and sum the remaining.\\n// For use with viewsChart and queriesChart components.\\n\\nconst tableArray = {{appTable.displayedData}}\\nconst tableArrayInts = []     \\n\\nfor (i = 0; i < tableArray.length; i++) {\\n  tableArrayInts.push({\\n    \\\"appName\\\": tableArray[i].appName,\\n    \\\"pageviews\\\": parseInt(tableArray[i].pageviews),\\n    \\\"queries\\\": parseInt(tableArray[i].queries),\\n  })\\n}\\n      \\nconst pageviewSortArray = tableArrayInts.slice().sort((b,a) => a.pageviews - b.pageviews)\\nconst querySortArray = tableArrayInts.slice().sort((b,a) => a.queries - b.queries)\\n\\nfunction topArray(inputArray, key) {\\n  let newArray = inputArray.slice(0,10)\\n  const other = inputArray.slice(11)\\n  const otherValues = other.map(obj => obj[key])\\n  const otherSum = otherValues.reduce((a,b) => a + b, 0)\\n  newArray.push({appName: \\\"Other\\\", [key]: otherSum})\\n  return newArray\\n}\\n\\nconst topViews = topArray(pageviewSortArray, \\\"pageviews\\\")\\nconst topQueries = topArray(querySortArray, \\\"queries\\\")\\n\\nreturn {topViews, topQueries}\",\"value\",\"\"]],\"style\",null,\"position2\",null,\"mobilePosition2\",null,\"mobileAppPosition\",null,\"tabIndex\",null,\"container\",\"\",\"createdAt\",\"~m1651250294554\",\"updatedAt\",\"~m1651258177682\",\"folder\",\"transformers\",\"screen\",null]]],\"quartiles\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"quartiles\",\"^4\",\"function\",\"^5\",\"Function\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"funcBody\",\"// Define quartile boundaries for data currently displayed in the % columns, used in determining background colors.\\n\\nconst viewsArray = {{appTable.columnMappers['Custom Column 1']}}\\nconst queriesArray = {{appTable.columnMappers['Custom Column 2']}}\\n\\n// Taken from https://stackoverflow.com/a/48719875\\nfunction quartile(data, q) {\\n  data = arraySortNumbers(data);\\n  var pos = ((data.length) - 1) * q;\\n  var base = Math.floor(pos);\\n  var rest = pos - base;\\n  if( (data[base+1]!==undefined) ) {\\n    return data[base] + rest * (data[base+1] - data[base]);\\n  } else {\\n    return data[base];\\n  }\\n}\\n\\nfunction arraySortNumbers(inputArray){\\n  return inputArray.sort(function(a, b) {\\n    return a - b;\\n  });\\n}\\n\\nconst views25 = quartile(viewsArray, .25)\\nconst views50 = quartile(viewsArray, .5)\\nconst views75 = quartile(viewsArray, .75)\\nconst queries25 = quartile(queriesArray, .25)\\nconst queries50 = quartile(queriesArray, .5)\\nconst queries75 = quartile(queriesArray, .75)\\n\\nreturn {views25, views50, views75, queries25, queries50, queries75}\",\"value\",\"\"]],\"^:\",null,\"^;\",null,\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651190112566\",\"^A\",\"~m1651257178233\",\"^B\",\"transformers\",\"^C\",null]]],\"totals\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"totals\",\"^4\",\"datasource\",\"^5\",\"SqlQueryUnified\",\"^6\",null,\"^7\",\"91949560-c1a0-41ad-99e2-9557982af823\",\"^8\",\"Retool Audit Log\",\"^9\",[\"^3\",[\"queryRefreshTime\",\"\",\"records\",\"\",\"lastReceivedFromResourceAt\",null,\"databasePasswordOverride\",\"\",\"queryDisabledMessage\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",true,\"showFailureToaster\",true,\"query\",\"-- Get totals of app views and queries to calculate % columns.\\n\\nselect \\n sum(case when \\\"actionType\\\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\\n sum(case when \\\"actionType\\\" = 'QUERY_RUN' then 1 else 0 end) as queries\\nfrom \\n\\taudit_trail_events e \\nwhere \\n\\t(\\\"actionType\\\" = 'PAGE_VIEW' or \\\"actionType\\\" = 'QUERY_RUN')\\n  and \\\"createdAt\\\" >= {{dateRange.value.start}}\\n  and \\\"createdAt\\\" <= {{dateRange.value.end}}\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"privateParams\",[\"~#iL\",[]],\"runWhenPageLoadsDelay\",\"\",\"warningCodes\",[\"^D\",[]],\"data\",null,\"recordId\",\"\",\"importedQueryInputs\",[\"^3\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"dataArray\",[\"^D\",[]],\"cacheKeyTtl\",\"\",\"filterBy\",\"\",\"databaseHostOverride\",\"\",\"metadata\",null,\"editorMode\",\"sql\",\"actionType\",\"\",\"changesetObject\",\"\",\"shouldUseLegacySql\",false,\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"databaseNameOverride\",\"\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"watchedParams\",[\"^D\",[]],\"enableErrorTransformer\",false,\"enableBulkUpdates\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^3\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"bulkUpdatePrimaryKey\",\"\",\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^D\",[]],\"tableName\",\"\",\"queryTimeout\",\"10000\",\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^D\",[]],\"databaseUsernameOverride\",\"\",\"shouldEnableBatchQuerying\",false,\"doNotThrowOnNoOp\",false,\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^:\",null,\"^;\",null,\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651189068427\",\"^A\",\"~m1651258683952\",\"^B\",\"auditLogsQueries\",\"^C\",null]]],\"folders\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"folders\",\"^4\",\"datasource\",\"^5\",\"SqlQueryUnified\",\"^6\",null,\"^7\",\"91949560-c1a0-41ad-99e2-9557982af823\",\"^8\",\"Retool Audit Log\",\"^9\",[\"^3\",[\"queryRefreshTime\",\"\",\"records\",\"\",\"lastReceivedFromResourceAt\",null,\"databasePasswordOverride\",\"\",\"queryDisabledMessage\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",true,\"showFailureToaster\",true,\"query\",\"-- Get a list of folders to populate that folderSelect component.\\n\\nselect \\n\\tid,\\n  name \\nfrom \\n\\tfolders\\ngroup by 1,2\\norder by 2 asc\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"privateParams\",[\"^D\",[]],\"runWhenPageLoadsDelay\",\"\",\"warningCodes\",[\"^D\",[]],\"data\",null,\"recordId\",\"\",\"importedQueryInputs\",[\"^3\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"dataArray\",[\"^D\",[]],\"cacheKeyTtl\",\"\",\"filterBy\",\"\",\"databaseHostOverride\",\"\",\"metadata\",null,\"editorMode\",\"sql\",\"actionType\",\"\",\"changesetObject\",\"\",\"shouldUseLegacySql\",false,\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"databaseNameOverride\",\"\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"watchedParams\",[\"^D\",[]],\"enableErrorTransformer\",false,\"enableBulkUpdates\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^3\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"bulkUpdatePrimaryKey\",\"\",\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^D\",[]],\"tableName\",\"\",\"queryTimeout\",\"10000\",\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^D\",[]],\"databaseUsernameOverride\",\"\",\"shouldEnableBatchQuerying\",false,\"doNotThrowOnNoOp\",false,\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^:\",null,\"^;\",null,\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651187121468\",\"^A\",\"~m1651248678037\",\"^B\",\"auditLogsQueries\",\"^C\",null]]],\"appUsage\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"appUsage\",\"^4\",\"datasource\",\"^5\",\"SqlQueryUnified\",\"^6\",null,\"^7\",\"91949560-c1a0-41ad-99e2-9557982af823\",\"^8\",\"Retool Audit Log\",\"^9\",[\"^3\",[\"queryRefreshTime\",\"\",\"records\",\"\",\"lastReceivedFromResourceAt\",null,\"databasePasswordOverride\",\"\",\"queryDisabledMessage\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",true,\"showFailureToaster\",true,\"query\",\"-- Parse the audit log to get app views and queries per app.\\n-- Note that the Retool database refers to apps as \\\"pages.\\\"\\n\\nselect \\n \\\"pageName\\\" as \\\"appName\\\",\\n f.name as \\\"folderName\\\",\\n sum(case when \\\"actionType\\\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\\n sum(case when \\\"actionType\\\" = 'QUERY_RUN' then 1 else 0 end) as queries\\nfrom \\n\\taudit_trail_events e \\n  inner join pages p on e.\\\"pageName\\\" = p.name\\n  inner join folders f on p.\\\"folderId\\\" = f.id\\nwhere \\n\\t(\\\"actionType\\\" = 'PAGE_VIEW' or \\\"actionType\\\" = 'QUERY_RUN')\\n  and \\\"pageName\\\" ilike {{\\\"%\\\" + appInput.value + \\\"%\\\"}}\\n  and (f.id = any({{folderSelect.value}}) or {{folderSelect.value.length === 0}})\\n  and e.\\\"createdAt\\\" >= {{dateRange.value.start}}\\n  and e.\\\"createdAt\\\" <= {{dateRange.value.end}}\\ngroup by 1,2\\norder by 3 desc\\n\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"privateParams\",[\"^D\",[]],\"runWhenPageLoadsDelay\",\"\",\"warningCodes\",[\"^D\",[]],\"data\",null,\"recordId\",\"\",\"importedQueryInputs\",[\"^3\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"dataArray\",[\"^D\",[]],\"cacheKeyTtl\",\"\",\"filterBy\",\"\",\"databaseHostOverride\",\"\",\"metadata\",null,\"editorMode\",\"sql\",\"actionType\",\"\",\"changesetObject\",\"\",\"shouldUseLegacySql\",false,\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"databaseNameOverride\",\"\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"watchedParams\",[\"^D\",[]],\"enableErrorTransformer\",false,\"enableBulkUpdates\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^3\",[]],\"enableTransformer\",true,\"showUpdateSetValueDynamicallyToggle\",true,\"bulkUpdatePrimaryKey\",\"\",\"runWhenPageLoads\",false,\"transformer\",\"\",\"events\",[\"^D\",[]],\"tableName\",\"\",\"queryTimeout\",\"10000\",\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^D\",[]],\"databaseUsernameOverride\",\"\",\"shouldEnableBatchQuerying\",false,\"doNotThrowOnNoOp\",false,\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^:\",null,\"^;\",null,\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651186196045\",\"^A\",\"~m1651258731646\",\"^B\",\"auditLogsQueries\",\"^C\",null]]],\"appTable\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"appTable\",\"^4\",\"widget\",\"^5\",\"TableWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"showCustomButton\",false,\"sortMappedValue\",[\"^3\",[]],\"_filteredSortedRenderedDataWithTypes\",null,\"normalizedData\",null,\"saveChangesDisabled\",\"\",\"columnTypeProperties\",[\"^3\",[\"Custom Column 1\",[\"^3\",[\"showSeparators\",true,\"padDecimal\",true,\"decimalPlaces\",\"2\"]],\"Custom Column 2\",[\"^3\",[\"showSeparators\",true,\"padDecimal\",true,\"decimalPlaces\",\"2\"]],\"appName\",[\"^3\",[]]]],\"columnWidths\",[\"^D\",[[\"^ \",\"id\",\"appName\",\"value\",273.6640625]]],\"showSummaryFooter\",false,\"disableRowSelectInteraction\",false,\"columnWidthsMobile\",[\"^D\",[]],\"hasNextAfterCursor\",\"\",\"columnTypeSpecificExtras\",[\"^3\",[]],\"onRowAdded\",\"\",\"columnHeaderNames\",[\"^3\",[\"appName\",\"App name\",\"folderName\",\"Folder name\",\"pageviews\",\"App views\",\"queries\",\"Queries\",\"Custom Column 1\",\"% of total views\",\"Custom Column 2\",\"% of total queries\"]],\"alwaysShowPaginator\",false,\"columnColors\",[\"^3\",[\"appName\",\"\",\"folderName\",\"\",\"pageviews\",\"\",\"queries\",\"\",\"pageName\",\"\",\"Custom Column 1\",\"{{ function() {\\n  if (self < quartiles.value.views25) {\\n    return gradient.data.firstQuartile\\n  } else if (self < quartiles.value.views50) {\\n    return gradient.data.secondQuartile\\n  } else if (self < quartiles.value.views75) {\\n    return gradient.data.thirdQuartile\\n  } else {\\n    return gradient.data.fourthQuartile\\n  }\\n }()\\n}}\",\"Custom Column 2\",\"{{ function() {\\n  if (self < quartiles.value.queries25) {\\n    return gradient.data.firstQuartile\\n  } else if (self < quartiles.value.queries50) {\\n    return gradient.data.secondQuartile\\n  } else if (self < quartiles.value.queries75) {\\n    return gradient.data.thirdQuartile\\n  } else {\\n    return gradient.data.fourthQuartile\\n  }\\n }()\\n}}\"]],\"columnFrozenAlignments\",[\"^3\",[]],\"allowMultiRowSelect\",false,\"columnFormats\",[\"^3\",[\"Custom Column 1\",\"PercentDataCell\",\"Custom Column 2\",\"PercentDataCell\",\"appName\",\"TextMultiDataCell\"]],\"columnRestrictedEditing\",[\"^3\",[]],\"showFilterButton\",true,\"_columnSummaryTypes\",[\"^3\",[\"Custom Column 1\",\"average\",\"Custom Column 2\",\"average\",\"appName\",\"\"]],\"_columnsWithLegacyBackgroundColor\",[\"~#iOS\",[]],\"showAddRowButton\",false,\"nextBeforeCursor\",\"\",\"columnVisibility\",[\"^3\",[\"appName\",true,\"folderName\",true,\"pageviews\",true,\"queries\",true,\"pageName\",true,\"Custom Column 1\",true,\"Custom Column 2\",true]],\"selectedPageIndex\",\"0\",\"applyDynamicSettingsToColumnOrder\",true,\"rowColor\",[],\"actionButtonColumnName\",\"Actions\",\"resetAfterSave\",true,\"filterStackType\",\"and\",\"downloadRawData\",false,\"showFetchingIndicator\",true,\"serverPaginated\",false,\"data\",\"{{ appUsage.data }}\",\"displayedData\",null,\"actionButtons\",[\"^D\",[]],\"actionButtonSelectsRow\",true,\"selectRowByDefault\",true,\"defaultSortByColumn\",\"\",\"paginationOffset\",0,\"columnAlignment\",[\"^3\",[\"Custom Column 1\",\"right\",\"Custom Column 2\",\"right\",\"appName\",\"left\"]],\"columnSummaries\",[\"^ \"],\"sortedDesc\",false,\"customButtonName\",\"\",\"columnMappersRenderAsHTML\",[\"^3\",[]],\"showRefreshButton\",true,\"pageSize\",13,\"useDynamicColumnSettings\",false,\"actionButtonPosition\",\"left\",\"dynamicRowHeights\",false,\"bulkUpdateAction\",\"\",\"afterCursor\",\"\",\"onCustomButtonPressQueryName\",\"\",\"changeSet\",[\"^ \"],\"sortedColumn\",\"\",\"_columnSummaryValues\",[\"^3\",[\"Custom Column 1\",\"\",\"Custom Column 2\",\"\",\"appName\",\"\"]],\"checkboxRowSelect\",true,\"_compatibilityMode\",false,\"showColumnBorders\",false,\"_renderedDataWithTypes\",null,\"columnAllowOverflow\",[\"^3\",[]],\"beforeCursor\",\"\",\"serverPaginationType\",\"limitOffsetBased\",\"onRowSelect\",\"\",\"showDownloadButton\",true,\"selectedIndex\",null,\"defaultSortDescending\",false,\"_sortedDisplayedDataIndices\",null,\"dynamicColumnSettings\",null,\"totalRowCount\",\"\",\"recordUpdates\",[],\"newRow\",null,\"emptyMessage\",\"No rows found\",\"columnEditable\",[\"^3\",[\"Custom Column 1\",false,\"Custom Column 2\",false]],\"_viewerColumnSummaryTypes\",[\"^ \"],\"filters\",[],\"displayedDataIndices\",null,\"disableSorting\",[\"^3\",[]],\"columnMappers\",[\"^3\",[\"Custom Column 1\",\"{{currentRow.pageviews / totals.data.pageviews}}\",\"Custom Column 2\",\"{{currentRow.queries / totals.data.queries}}\"]],\"showClearSelection\",false,\"doubleClickToEdit\",true,\"overflowType\",\"pagination\",\"_reverseSortedDisplayedDataIndices\",null,\"selectedCell\",[\"^ \",\"index\",null,\"data\",null,\"columnName\",null],\"columns\",[\"^D\",[\"pageName\",\"appName\",\"folderName\",\"pageviews\",\"Custom Column 1\",\"queries\",\"Custom Column 2\"]],\"defaultSelectedRow\",\"first\",\"freezeActionButtonColumns\",false,\"sort\",null,\"sortByRawValue\",[\"^3\",[]],\"calculatedColumns\",[\"^D\",[\"Custom Column 1\",\"Custom Column 2\"]],\"selectedRow\",[\"^ \",\"^G\",null,\"^H\",null],\"showPaginationOnTop\",false,\"_reverseDisplayedDataIndices\",null,\"nextAfterCursor\",\"\",\"useCompactMode\",false]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"rowGroup\",\"body\",\"subcontainer\",\"\",\"row\",1.6,\"col\",0,\"height\",17,\"width\",8,\"tabNum\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651186952146\",\"^A\",\"~m1651256412551\",\"^B\",\"\",\"^C\",null]]],\"folderSelect\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"folderSelect\",\"^4\",\"widget\",\"^5\",\"MultiselectWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"imageByIndex\",\"\",\"_disabledByIndex\",[\"^D\",[]],\"showSelectionIndicator\",true,\"_values\",[\"^D\",[]],\"iconByIndex\",\"\",\"values\",\"{{ item.id }}\",\"readOnly\",false,\"iconAfter\",\"\",\"_iconByIndex\",[\"^D\",[]],\"wrapTags\",true,\"selectedIndexes\",[],\"selectedItems\",[],\"inputValue\",\"\",\"hidden\",false,\"customValidation\",\"\",\"data\",\"{{ folders.data }}\",\"maxCount\",null,\"searchMode\",\"fuzzy\",\"hideValidationMessage\",false,\"fallbackTextByIndex\",\"\",\"textBefore\",\"\",\"_fallbackTextByIndex\",[\"^D\",[]],\"validationMessage\",\"\",\"automaticItemColors\",false,\"itemAdornmentShape\",\"circle\",\"textAfter\",\"\",\"showInEditor\",false,\"_defaultValue\",[],\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",[],\"hiddenByIndex\",\"\",\"labelCaption\",\"\",\"labelWidth\",\"33\",\"deprecatedLabels\",[],\"_hiddenByIndex\",[\"^D\",[]],\"placeholder\",\"Select folders\",\"_captionByIndex\",[\"^D\",[]],\"itemAdornmentSize\",\"auto\",\"label\",\"\",\"_hasMigratedNestedItems\",true,\"captionByIndex\",\"\",\"_validate\",false,\"itemMode\",\"dynamic\",\"labelWidthUnit\",\"%\",\"allowCustomValue\",false,\"invalid\",false,\"_tooltipByIndex\",[\"^D\",[]],\"_colorByIndex\",[\"^D\",[]],\"tooltipByIndex\",\"\",\"iconBefore\",\"\",\"colorByIndex\",\"\",\"events\",[\"^3\",[]],\"_ids\",[\"^D\",[]],\"emptyMessage\",\"\",\"selectedLabels\",[],\"overlayMaxHeight\",375,\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"minCount\",null,\"_labels\",[\"^D\",[]],\"labelWrap\",false,\"disabledValues\",[],\"disabledByIndex\",\"\",\"maintainSpaceWhenHidden\",false,\"_imageByIndex\",[\"^D\",[]],\"required\",false,\"labels\",\"{{ item.name }}\"]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",0.6,\"col\",4,\"^L\",1,\"^M\",4,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651187041497\",\"^A\",\"~m1651187240188\",\"^B\",\"\",\"^C\",null]]],\"appInput\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"appInput\",\"^4\",\"widget\",\"^5\",\"TextInputWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"spellCheck\",false,\"readOnly\",false,\"iconAfter\",\"\",\"showCharacterCount\",false,\"autoComplete\",false,\"maxLength\",null,\"hidden\",false,\"customValidation\",\"\",\"patternType\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"_defaultValue\",\"\",\"showClear\",false,\"pattern\",\"\",\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"\",\"labelCaption\",\"\",\"labelWidth\",\"33\",\"autoFill\",\"\",\"placeholder\",\"Search app names\",\"label\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"\",\"minLength\",null,\"inputTooltip\",\"\",\"events\",[\"^3\",[]],\"autoCapitalize\",\"none\",\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",0.6,\"col\",0,\"^L\",1,\"^M\",4,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651187291934\",\"^A\",\"~m1651187311675\",\"^B\",\"\",\"^C\",null]]],\"title\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"title\",\"^4\",\"widget\",\"^5\",\"TextWidget2\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"_defaultValue\",\"\",\"tooltipText\",\"\",\"value\",\"# Retool app usage\\n---\\nReporting on the **`{{urlparams.href.split('https://')[1].split('/editor')[0].split('/app')[0].split('/tree')[0]}}`** instance of Retool\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",0,\"col\",0,\"^L\",0.6,\"^M\",12,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651187874087\",\"^A\",\"~m1651259114698\",\"^B\",\"\",\"^C\",null]]],\"gradient\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"gradient\",\"^4\",\"datasource\",\"^5\",\"JavascriptQuery\",\"^6\",null,\"^7\",\"JavascriptQuery\",\"^8\",null,\"^9\",[\"^3\",[\"queryRefreshTime\",\"\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"showFailureToaster\",true,\"query\",\"// Define colors to be used for % columns, one per quartile.\\nreturn {firstQuartile:\\\"#C9D9F8\\\", secondQuartile:\\\"#A4C2F4\\\", thirdQuartile:\\\"#6D9EEB\\\", fourthQuartile:\\\"#3B78D7\\\"}\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"privateParams\",[\"^D\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^3\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"metadata\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"watchedParams\",[\"^D\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^3\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"runWhenPageLoads\",true,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^D\",[]],\"queryTimeout\",\"10000\",\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^D\",[]],\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^:\",null,\"^;\",null,\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651192122309\",\"^A\",\"~m1651248757965\",\"^B\",\"\",\"^C\",null]]],\"viewsChart\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"viewsChart\",\"^4\",\"widget\",\"^5\",\"PlotlyChartWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"dataseries\",[\"^3\",[\"0\",[\"^3\",[\"label\",\"pageviews\",\"datasource\",\"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}\",\"chartType\",\"pie\",\"aggregationType\",\"sum\",\"color\",null,\"colors\",[\"^3\",[\"0\",\"#033663\",\"1\",\"#247BC7\",\"2\",\"#55A1E3\",\"3\",\"#DAECFC\",\"4\",\"#EECA86\",\"5\",\"#E9AB11\",\"6\",\"#D47E2F\",\"7\",\"#C15627\",\"8\",\"#224930\",\"9\",\"#238146\",\"10\",\"#55A874\"]],\"visible\",true,\"hovertemplate\",\"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>\"]],\"1\",[\"^3\",[\"label\",\"queries\",\"datasource\",\"{{formatDataAsObject(topApps.value.topViews)['queries']}}\",\"chartType\",\"pie\",\"aggregationType\",\"sum\",\"color\",null,\"colors\",[\"^3\",[\"0\",\"#033663\",\"1\",\"#247BC7\",\"2\",\"#55A1E3\",\"3\",\"#DAECFC\",\"4\",\"#EECA86\",\"5\",\"#E9AB11\",\"6\",\"#D47E2F\",\"7\",\"#C15627\",\"8\",\"#224930\",\"9\",\"#238146\",\"10\",\"#55A874\"]],\"visible\",false,\"hovertemplate\",\"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>\"]]]],\"isDataTemplateDirty\",false,\"datasource\",\"\",\"isJsonTemplateDirty\",false,\"groupByDropdown\",\"\",\"datasourceInputMode\",\"javascript\",\"datasourceDataType\",\"array\",\"layout\",\"\",\"xAxisDropdown\",\"appName\",\"data\",\"\",\"isStackSeriesEnabled\",false,\"xAxisTickFormat\",\"\",\"skipDatasourceUpdate\",false,\"datasourceJS\",\"{{topApps.value.topViews}}\",\"yAxisTickFormat\",\"\",\"datasourcePluginType\",\"function\",\"xAxisType\",\"default\",\"datasourcePluginId\",null,\"legendAlignment\",\"bottom\",\"isLayoutJsonDirty\",false,\"chartType\",\"pie\",\"title\",\"App views\",\"xAxis\",\"{{formatDataAsObject(topApps.value.topViews).appName}}\",\"groupByMode\",\"dropdown\",\"onPointSelectQuery\",\"\",\"xAxisMode\",\"dropdown\",\"shouldShowLegend\",false,\"yAxisTitle\",\"\",\"selectedPoints\",[],\"xAxisTitle\",\"\",\"groupByJS\",\"\"]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",1.6,\"col\",8,\"^L\",8.2,\"^M\",4,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651248857160\",\"^A\",\"~m1651265131594\",\"^B\",\"\",\"^C\",null]]],\"queriesChart\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"queriesChart\",\"^4\",\"widget\",\"^5\",\"PlotlyChartWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"dataseries\",[\"^3\",[\"0\",[\"^3\",[\"label\",\"pageviews\",\"datasource\",\"{{formatDataAsObject(topApps.value.topQueries)['pageviews']}}\",\"chartType\",\"pie\",\"aggregationType\",\"sum\",\"color\",null,\"colors\",[\"^3\",[\"0\",\"#033663\",\"1\",\"#247BC7\",\"2\",\"#55A1E3\",\"3\",\"#DAECFC\",\"4\",\"#EECA86\",\"5\",\"#E9AB11\",\"6\",\"#D47E2F\",\"7\",\"#C15627\",\"8\",\"#224930\",\"9\",\"#238146\",\"10\",\"#55A874\"]],\"visible\",false,\"hovertemplate\",\"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>\"]],\"1\",[\"^3\",[\"label\",\"queries\",\"datasource\",\"{{formatDataAsObject(topApps.value.topQueries)['queries']}}\",\"chartType\",\"pie\",\"aggregationType\",\"sum\",\"color\",null,\"colors\",[\"^3\",[\"0\",\"#033663\",\"1\",\"#247BC7\",\"2\",\"#55A1E3\",\"3\",\"#DAECFC\",\"4\",\"#EECA86\",\"5\",\"#E9AB11\",\"6\",\"#D47E2F\",\"7\",\"#C15627\",\"8\",\"#224930\",\"9\",\"#238146\",\"10\",\"#55A874\"]],\"visible\",true,\"hovertemplate\",\"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>\"]]]],\"isDataTemplateDirty\",true,\"datasource\",\"\",\"isJsonTemplateDirty\",false,\"groupByDropdown\",\"\",\"datasourceInputMode\",\"javascript\",\"datasourceDataType\",\"array\",\"layout\",\"\",\"xAxisDropdown\",\"appName\",\"data\",\"\",\"isStackSeriesEnabled\",false,\"xAxisTickFormat\",\"\",\"skipDatasourceUpdate\",false,\"datasourceJS\",\"{{topApps.value.topQueries}}\",\"yAxisTickFormat\",\"\",\"datasourcePluginType\",\"function\",\"xAxisType\",\"default\",\"datasourcePluginId\",null,\"legendAlignment\",\"left\",\"isLayoutJsonDirty\",false,\"chartType\",\"pie\",\"title\",\"Queries\",\"xAxis\",\"{{formatDataAsObject(topApps.value.topQueries).appName}}\",\"events\",[\"^D\",[]],\"groupByMode\",\"dropdown\",\"onPointSelectQuery\",\"\",\"xAxisMode\",\"dropdown\",\"shouldShowLegend\",false,\"yAxisTitle\",\"\",\"selectedPoints\",[],\"xAxisTitle\",\"\",\"groupByJS\",\"\"]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",9.799999999999999,\"col\",8,\"^L\",8.6,\"^M\",4,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651249046599\",\"^A\",\"~m1651259519057\",\"^B\",\"\",\"^C\",null]]],\"dateRange\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"dateRange\",\"^4\",\"widget\",\"^5\",\"DateRangeWidget\",\"^6\",null,\"^7\",null,\"^8\",null,\"^9\",[\"^3\",[\"minDate\",\"\",\"readOnly\",false,\"iconAfter\",\"\",\"dateFormat\",\"MMM d, yyyy\",\"hidden\",\"\",\"customValidation\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",[\"^3\",[\"start\",\"{{ moment().subtract(6, 'months')}}\",\"end\",\"{{moment()}}\"]],\"startPlaceholder\",\"Start date\",\"labelCaption\",\"\",\"maxDate\",\"\",\"labelWidth\",\"33\",\"label\",\"\",\"formattedValue\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"calendar\",\"endPlaceholder\",\"End date\",\"events\",[\"^3\",[]],\"textBetween\",\"-\",\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false]],\"^:\",[\"^3\",[]],\"^;\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^?\",\"\",\"^J\",\"body\",\"^K\",\"\",\"row\",0.6,\"col\",8,\"^L\",1,\"^M\",4,\"^N\",0]]],\"^<\",null,\"^=\",null,\"^>\",null,\"^?\",\"\",\"^@\",\"~m1651258292135\",\"^A\",\"~m1651259580761\",\"^B\",\"\",\"^C\",null]]]]],\"^@\",null,\"version\",\"2.89.12\",\"appThemeId\",null,\"preloadedAppJavaScript\",null,\"preloadedAppJSLinks\",[],\"testEntities\",[],\"tests\",[],\"appStyles\",\"\",\"responsiveLayoutDisabled\",false,\"loadingIndicatorsDisabled\",false,\"urlFragmentDefinitions\",[\"^D\",[]],\"pageLoadValueOverrides\",[\"^D\",[]],\"customDocumentTitle\",\"\",\"customDocumentTitleEnabled\",false,\"customShortcuts\",[],\"isGlobalWidget\",false,\"isMobileApp\",false,\"multiScreenMobileApp\",false,\"folders\",[\"^D\",[\"auditLogsQueries\",\"transformers\"]],\"queryStatusVisibility\",true,\"markdownLinkBehavior\",\"auto\",\"inAppRetoolPillAppearance\",\"NO_OVERRIDE\",\"rootScreen\",null,\"instrumentationEnabled\",false,\"experimentalPerfFeatures\",[\"^ \",\"batchCommitModelEnabled\",false,\"skipDepCycleCheckingEnabled\",false,\"serverDepGraphEnabled\",false]]]]"},"changesRecord":[{"type":"MIGRATIONS_UP_TO_DATE","payload":{"migratedAppTemplate":{"tests":[],"folders":["auditLogsQueries","transformers"],"plugins":{"title":{"id":"title","type":"widget","style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"# Retool app usage\n---\nReporting on the **`{{urlparams.href.split('https://')[1].split('/editor')[0].split('/app')[0].split('/tree')[0]}}`** instance of Retool","hidden":false,"heightType":"auto","imageWidth":"fit","tooltipText":"","overflowType":"scroll","showInEditor":false,"_defaultValue":"","verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:17:54.087Z","namespace":null,"position2":{"col":0,"row":0,"width":12,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:05:14.698Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"totals":{"id":"totals","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Get totals of app views and queries to calculate % columns.\n\nselect \n sum(case when \"actionType\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\n sum(case when \"actionType\" = 'QUERY_RUN' then 1 else 0 end) as queries\nfrom \n\taudit_trail_events e \nwhere \n\t(\"actionType\" = 'PAGE_VIEW' or \"actionType\" = 'QUERY_RUN')\n  and \"createdAt\" >= {{dateRange.value.start}}\n  and \"createdAt\" <= {{dateRange.value.end}}","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T23:37:48.427Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:58:03.952Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"folders":{"id":"folders","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Get a list of folders to populate that folderSelect component.\n\nselect \n\tid,\n  name \nfrom \n\tfolders\ngroup by 1,2\norder by 2 asc","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T23:05:21.468Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T16:11:18.037Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"topApps":{"id":"topApps","type":"function","style":null,"folder":"transformers","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"// Calculate top 10 apps by app views and by queries, and sum the remaining.\n// For use with viewsChart and queriesChart components.\n\nconst tableArray = {{appTable.displayedData}}\nconst tableArrayInts = []     \n\nfor (i = 0; i < tableArray.length; i++) {\n  tableArrayInts.push({\n    \"appName\": tableArray[i].appName,\n    \"pageviews\": parseInt(tableArray[i].pageviews),\n    \"queries\": parseInt(tableArray[i].queries),\n  })\n}\n      \nconst pageviewSortArray = tableArrayInts.slice().sort((b,a) => a.pageviews - b.pageviews)\nconst querySortArray = tableArrayInts.slice().sort((b,a) => a.queries - b.queries)\n\nfunction topArray(inputArray, key) {\n  let newArray = inputArray.slice(0,10)\n  const other = inputArray.slice(11)\n  const otherValues = other.map(obj => obj[key])\n  const otherSum = otherValues.reduce((a,b) => a + b, 0)\n  newArray.push({appName: \"Other\", [key]: otherSum})\n  return newArray\n}\n\nconst topViews = topArray(pageviewSortArray, \"pageviews\")\nconst topQueries = topArray(querySortArray, \"queries\")\n\nreturn {topViews, topQueries}"},"container":"","createdAt":"2022-04-29T16:38:14.554Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:49:37.682Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appInput":{"id":"appInput","type":"widget","style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Search app names","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"_defaultValue":"","labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:08:11.934Z","namespace":null,"position2":{"col":0,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-28T23:08:31.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appTable":{"id":"appTable","type":"widget","style":{},"folder":"","screen":null,"subtype":"TableWidget","tabIndex":null,"template":{"data":"{{ appUsage.data }}","sort":null,"newRow":null,"columns":["pageName","appName","folderName","pageviews","Custom Column 1","queries","Custom Column 2"],"filters":[],"pageSize":13,"rowColor":[],"changeSet":{},"onRowAdded":"","sortedDesc":false,"afterCursor":"","onRowSelect":"","selectedRow":{"data":null,"index":null},"beforeCursor":"","columnColors":{"appName":"","queries":"","pageName":"","pageviews":"","folderName":"","Custom Column 1":"{{ function() {\n  if (self < quartiles.value.views25) {\n    return gradient.data.firstQuartile\n  } else if (self < quartiles.value.views50) {\n    return gradient.data.secondQuartile\n  } else if (self < quartiles.value.views75) {\n    return gradient.data.thirdQuartile\n  } else {\n    return gradient.data.fourthQuartile\n  }\n }()\n}}","Custom Column 2":"{{ function() {\n  if (self < quartiles.value.queries25) {\n    return gradient.data.firstQuartile\n  } else if (self < quartiles.value.queries50) {\n    return gradient.data.secondQuartile\n  } else if (self < quartiles.value.queries75) {\n    return gradient.data.thirdQuartile\n  } else {\n    return gradient.data.fourthQuartile\n  }\n }()\n}}"},"columnWidths":[{"id":"appName","value":273.6640625}],"emptyMessage":"No rows found","overflowType":"pagination","selectedCell":{"data":null,"index":null,"columnName":null},"sortedColumn":"","actionButtons":[],"columnFormats":{"appName":"TextMultiDataCell","Custom Column 1":"PercentDataCell","Custom Column 2":"PercentDataCell"},"columnMappers":{"Custom Column 1":"{{currentRow.pageviews / totals.data.pageviews}}","Custom Column 2":"{{currentRow.queries / totals.data.queries}}"},"displayedData":null,"recordUpdates":[],"selectedIndex":null,"totalRowCount":"","columnEditable":{"Custom Column 1":false,"Custom Column 2":false},"disableSorting":{},"normalizedData":null,"resetAfterSave":true,"sortByRawValue":{},"useCompactMode":false,"columnAlignment":{"appName":"left","Custom Column 1":"right","Custom Column 2":"right"},"columnSummaries":{},"downloadRawData":false,"filterStackType":"and","nextAfterCursor":"","serverPaginated":false,"sortMappedValue":{},"bulkUpdateAction":"","columnVisibility":{"appName":true,"queries":true,"pageName":true,"pageviews":true,"folderName":true,"Custom Column 1":true,"Custom Column 2":true},"customButtonName":"","nextBeforeCursor":"","paginationOffset":0,"showAddRowButton":false,"showCustomButton":false,"showFilterButton":true,"calculatedColumns":["Custom Column 1","Custom Column 2"],"checkboxRowSelect":true,"columnHeaderNames":{"appName":"App name","queries":"Queries","pageviews":"App views","folderName":"Folder name","Custom Column 1":"% of total views","Custom Column 2":"% of total queries"},"doubleClickToEdit":true,"dynamicRowHeights":false,"selectedPageIndex":"0","showColumnBorders":false,"showRefreshButton":true,"showSummaryFooter":false,"_compatibilityMode":false,"columnWidthsMobile":[],"defaultSelectedRow":"first","hasNextAfterCursor":"","selectRowByDefault":true,"showClearSelection":false,"showDownloadButton":true,"_columnSummaryTypes":{"appName":"","Custom Column 1":"average","Custom Column 2":"average"},"allowMultiRowSelect":false,"alwaysShowPaginator":false,"columnAllowOverflow":{},"defaultSortByColumn":"","saveChangesDisabled":"","showPaginationOnTop":false,"_columnSummaryValues":{"appName":"","Custom Column 1":"","Custom Column 2":""},"actionButtonPosition":"left","columnTypeProperties":{"appName":{},"Custom Column 1":{"padDecimal":true,"decimalPlaces":"2","showSeparators":true},"Custom Column 2":{"padDecimal":true,"decimalPlaces":"2","showSeparators":true}},"displayedDataIndices":null,"serverPaginationType":"limitOffsetBased","defaultSortDescending":false,"dynamicColumnSettings":null,"showFetchingIndicator":true,"_renderedDataWithTypes":null,"actionButtonColumnName":"Actions","actionButtonSelectsRow":true,"columnFrozenAlignments":{},"columnRestrictedEditing":{},"columnTypeSpecificExtras":{},"useDynamicColumnSettings":false,"_viewerColumnSummaryTypes":{},"columnMappersRenderAsHTML":{},"freezeActionButtonColumns":false,"_sortedDisplayedDataIndices":null,"disableRowSelectInteraction":false,"_reverseDisplayedDataIndices":null,"onCustomButtonPressQueryName":"","_columnsWithLegacyBackgroundColor":[],"applyDynamicSettingsToColumnOrder":true,"_reverseSortedDisplayedDataIndices":null,"_filteredSortedRenderedDataWithTypes":null},"container":"","createdAt":"2022-04-28T23:02:32.146Z","namespace":null,"position2":{"col":0,"row":1.6,"width":8,"height":17,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T18:20:12.551Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appUsage":{"id":"appUsage","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Parse the audit log to get app views and queries per app.\n-- Note that the Retool database refers to apps as \"pages.\"\n\nselect \n \"pageName\" as \"appName\",\n f.name as \"folderName\",\n sum(case when \"actionType\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\n sum(case when \"actionType\" = 'QUERY_RUN' then 1 else 0 end) as queries\nfrom \n\taudit_trail_events e \n  inner join pages p on e.\"pageName\" = p.name\n  inner join folders f on p.\"folderId\" = f.id\nwhere \n\t(\"actionType\" = 'PAGE_VIEW' or \"actionType\" = 'QUERY_RUN')\n  and \"pageName\" ilike {{\"%\" + appInput.value + \"%\"}}\n  and (f.id = any({{folderSelect.value}}) or {{folderSelect.value.length === 0}})\n  and e.\"createdAt\" >= {{dateRange.value.start}}\n  and e.\"createdAt\" <= {{dateRange.value.end}}\ngroup by 1,2\norder by 3 desc\n","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":true,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T22:49:56.045Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:58:51.646Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"gradient":{"id":"gradient","type":"datasource","style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"query":"// Define colors to be used for % columns, one per quartile.\nreturn {firstQuartile:\"#C9D9F8\", secondQuartile:\"#A4C2F4\", thirdQuartile:\"#6D9EEB\", fourthQuartile:\"#3B78D7\"}","events":[],"rawData":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":true,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-29T00:28:42.309Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T16:12:37.965Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateRange":{"id":"dateRange","type":"widget","style":{},"folder":"","screen":null,"subtype":"DateRangeWidget","tabIndex":null,"template":{"label":"","value":{"end":"{{moment()}}","start":"{{ moment().subtract(6, 'months')}}"},"events":{},"hidden":"","invalid":false,"loading":false,"maxDate":"","minDate":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"calendar","labelAlign":"left","labelWidth":"33","textBefore":"","formDataKey":"{{ self.id }}","textBetween":"-","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","endPlaceholder":"End date","formattedValue":"","labelWidthUnit":"%","customValidation":"","startPlaceholder":"Start date","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-29T18:51:32.135Z","namespace":null,"position2":{"col":8,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:13:00.761Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"quartiles":{"id":"quartiles","type":"function","style":null,"folder":"transformers","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"// Define quartile boundaries for data currently displayed in the % columns, used in determining background colors.\n\nconst viewsArray = {{appTable.columnMappers['Custom Column 1']}}\nconst queriesArray = {{appTable.columnMappers['Custom Column 2']}}\n\n// Taken from https://stackoverflow.com/a/48719875\nfunction quartile(data, q) {\n  data = arraySortNumbers(data);\n  var pos = ((data.length) - 1) * q;\n  var base = Math.floor(pos);\n  var rest = pos - base;\n  if( (data[base+1]!==undefined) ) {\n    return data[base] + rest * (data[base+1] - data[base]);\n  } else {\n    return data[base];\n  }\n}\n\nfunction arraySortNumbers(inputArray){\n  return inputArray.sort(function(a, b) {\n    return a - b;\n  });\n}\n\nconst views25 = quartile(viewsArray, .25)\nconst views50 = quartile(viewsArray, .5)\nconst views75 = quartile(viewsArray, .75)\nconst queries25 = quartile(queriesArray, .25)\nconst queries50 = quartile(queriesArray, .5)\nconst queries75 = quartile(queriesArray, .75)\n\nreturn {views25, views50, views75, queries25, queries50, queries75}"},"container":"","createdAt":"2022-04-28T23:55:12.566Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:32:58.233Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"viewsChart":{"id":"viewsChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"App views","xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topViews}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"bottom","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":false,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:14:17.160Z","namespace":null,"position2":{"col":8,"row":1.6,"width":4,"height":8.2,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T20:15:01.508Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"folderSelect":{"id":"folderSelect","type":"widget","style":{},"folder":"","screen":null,"subtype":"MultiselectWidget2","tabIndex":null,"template":{"_ids":[],"data":"{{ folders.data }}","label":"","value":[],"events":{},"hidden":false,"labels":"{{ item.name }}","values":"{{ item.id }}","_labels":[],"_values":[],"invalid":false,"loading":false,"disabled":false,"itemMode":"dynamic","maxCount":null,"minCount":null,"readOnly":false,"required":false,"wrapTags":true,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":"","placeholder":"Select folders","tooltipText":"","_iconByIndex":[],"colorByIndex":"","emptyMessage":"","imageByIndex":"","labelCaption":"","showInEditor":false,"_colorByIndex":[],"_defaultValue":[],"_imageByIndex":[],"hiddenByIndex":"","labelPosition":"left","selectedItems":[],"_hiddenByIndex":[],"captionByIndex":"","disabledValues":[],"labelWidthUnit":"%","selectedLabels":[],"tooltipByIndex":"","_captionByIndex":[],"_tooltipByIndex":[],"disabledByIndex":"","selectedIndexes":[],"_disabledByIndex":[],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":"","_fallbackTextByIndex":[],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:04:01.497Z","namespace":null,"position2":{"col":4,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-28T23:07:20.188Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"queriesChart":{"id":"queriesChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"Queries","xAxis":"{{formatDataAsObject(topApps.value.topQueries).appName}}","events":[],"layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topQueries)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topQueries)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topQueries}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"left","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":true,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:17:26.599Z","namespace":null,"position2":{"col":8,"row":9.799999999999999,"width":4,"height":8.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:11:59.057Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"2.89.12","appStyles":"","createdAt":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"isMobileApp":false,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"customDocumentTitle":"","preloadedAppJSLinks":[],"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":true,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"experimentalPerfFeatures":{"serverDepGraphEnabled":false,"batchCommitModelEnabled":false,"skipDepCycleCheckingEnabled":false},"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customDocumentTitleEnabled":false}}},{"type":"WIDGET_TEMPLATE_UPDATE","payload":{"plugin":{"id":"viewsChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"App views","xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topViews}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"bottom","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":false,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:14:17.160Z","namespace":null,"position2":{"col":8,"row":1.6,"width":4,"height":8.2,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T20:15:01.508Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"update":{"xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","groupByJS":"","dataseries":{"0":{"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"groupByMode":"dropdown","xAxisDropdown":"appName","groupByDropdown":"","datasourceDataType":"array","isStackSeriesEnabled":false},"widgetId":"viewsChart"},"isUserTriggered":true},{"type":"MIGRATIONS_UP_TO_DATE","payload":{"migratedAppTemplate":{"tests":[],"folders":["auditLogsQueries","transformers"],"plugins":{"title":{"id":"title","type":"widget","style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"# Retool app usage\n---\nReporting on the **`{{urlparams.href.split('https://')[1].split('/editor')[0].split('/app')[0].split('/tree')[0]}}`** instance of Retool","hidden":false,"heightType":"auto","imageWidth":"fit","tooltipText":"","overflowType":"scroll","showInEditor":false,"_defaultValue":"","verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:17:54.087Z","namespace":null,"position2":{"col":0,"row":0,"width":12,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:05:14.698Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"totals":{"id":"totals","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Get totals of app views and queries to calculate % columns.\n\nselect \n sum(case when \"actionType\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\n sum(case when \"actionType\" = 'QUERY_RUN' then 1 else 0 end) as queries\nfrom \n\taudit_trail_events e \nwhere \n\t(\"actionType\" = 'PAGE_VIEW' or \"actionType\" = 'QUERY_RUN')\n  and \"createdAt\" >= {{dateRange.value.start}}\n  and \"createdAt\" <= {{dateRange.value.end}}","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T23:37:48.427Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:58:03.952Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"folders":{"id":"folders","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Get a list of folders to populate that folderSelect component.\n\nselect \n\tid,\n  name \nfrom \n\tfolders\ngroup by 1,2\norder by 2 asc","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T23:05:21.468Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T16:11:18.037Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"topApps":{"id":"topApps","type":"function","style":null,"folder":"transformers","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"// Calculate top 10 apps by app views and by queries, and sum the remaining.\n// For use with viewsChart and queriesChart components.\n\nconst tableArray = {{appTable.displayedData}}\nconst tableArrayInts = []     \n\nfor (i = 0; i < tableArray.length; i++) {\n  tableArrayInts.push({\n    \"appName\": tableArray[i].appName,\n    \"pageviews\": parseInt(tableArray[i].pageviews),\n    \"queries\": parseInt(tableArray[i].queries),\n  })\n}\n      \nconst pageviewSortArray = tableArrayInts.slice().sort((b,a) => a.pageviews - b.pageviews)\nconst querySortArray = tableArrayInts.slice().sort((b,a) => a.queries - b.queries)\n\nfunction topArray(inputArray, key) {\n  let newArray = inputArray.slice(0,10)\n  const other = inputArray.slice(11)\n  const otherValues = other.map(obj => obj[key])\n  const otherSum = otherValues.reduce((a,b) => a + b, 0)\n  newArray.push({appName: \"Other\", [key]: otherSum})\n  return newArray\n}\n\nconst topViews = topArray(pageviewSortArray, \"pageviews\")\nconst topQueries = topArray(querySortArray, \"queries\")\n\nreturn {topViews, topQueries}"},"container":"","createdAt":"2022-04-29T16:38:14.554Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:49:37.682Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appInput":{"id":"appInput","type":"widget","style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Search app names","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"_defaultValue":"","labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:08:11.934Z","namespace":null,"position2":{"col":0,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-28T23:08:31.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appTable":{"id":"appTable","type":"widget","style":{},"folder":"","screen":null,"subtype":"TableWidget","tabIndex":null,"template":{"data":"{{ appUsage.data }}","sort":null,"newRow":null,"columns":["pageName","appName","folderName","pageviews","Custom Column 1","queries","Custom Column 2"],"filters":[],"pageSize":13,"rowColor":[],"changeSet":{},"onRowAdded":"","sortedDesc":false,"afterCursor":"","onRowSelect":"","selectedRow":{"data":null,"index":null},"beforeCursor":"","columnColors":{"appName":"","queries":"","pageName":"","pageviews":"","folderName":"","Custom Column 1":"{{ function() {\n  if (self < quartiles.value.views25) {\n    return gradient.data.firstQuartile\n  } else if (self < quartiles.value.views50) {\n    return gradient.data.secondQuartile\n  } else if (self < quartiles.value.views75) {\n    return gradient.data.thirdQuartile\n  } else {\n    return gradient.data.fourthQuartile\n  }\n }()\n}}","Custom Column 2":"{{ function() {\n  if (self < quartiles.value.queries25) {\n    return gradient.data.firstQuartile\n  } else if (self < quartiles.value.queries50) {\n    return gradient.data.secondQuartile\n  } else if (self < quartiles.value.queries75) {\n    return gradient.data.thirdQuartile\n  } else {\n    return gradient.data.fourthQuartile\n  }\n }()\n}}"},"columnWidths":[{"id":"appName","value":273.6640625}],"emptyMessage":"No rows found","overflowType":"pagination","selectedCell":{"data":null,"index":null,"columnName":null},"sortedColumn":"","actionButtons":[],"columnFormats":{"appName":"TextMultiDataCell","Custom Column 1":"PercentDataCell","Custom Column 2":"PercentDataCell"},"columnMappers":{"Custom Column 1":"{{currentRow.pageviews / totals.data.pageviews}}","Custom Column 2":"{{currentRow.queries / totals.data.queries}}"},"displayedData":null,"recordUpdates":[],"selectedIndex":null,"totalRowCount":"","columnEditable":{"Custom Column 1":false,"Custom Column 2":false},"disableSorting":{},"normalizedData":null,"resetAfterSave":true,"sortByRawValue":{},"useCompactMode":false,"columnAlignment":{"appName":"left","Custom Column 1":"right","Custom Column 2":"right"},"columnSummaries":{},"downloadRawData":false,"filterStackType":"and","nextAfterCursor":"","serverPaginated":false,"sortMappedValue":{},"bulkUpdateAction":"","columnVisibility":{"appName":true,"queries":true,"pageName":true,"pageviews":true,"folderName":true,"Custom Column 1":true,"Custom Column 2":true},"customButtonName":"","nextBeforeCursor":"","paginationOffset":0,"showAddRowButton":false,"showCustomButton":false,"showFilterButton":true,"calculatedColumns":["Custom Column 1","Custom Column 2"],"checkboxRowSelect":true,"columnHeaderNames":{"appName":"App name","queries":"Queries","pageviews":"App views","folderName":"Folder name","Custom Column 1":"% of total views","Custom Column 2":"% of total queries"},"doubleClickToEdit":true,"dynamicRowHeights":false,"selectedPageIndex":"0","showColumnBorders":false,"showRefreshButton":true,"showSummaryFooter":false,"_compatibilityMode":false,"columnWidthsMobile":[],"defaultSelectedRow":"first","hasNextAfterCursor":"","selectRowByDefault":true,"showClearSelection":false,"showDownloadButton":true,"_columnSummaryTypes":{"appName":"","Custom Column 1":"average","Custom Column 2":"average"},"allowMultiRowSelect":false,"alwaysShowPaginator":false,"columnAllowOverflow":{},"defaultSortByColumn":"","saveChangesDisabled":"","showPaginationOnTop":false,"_columnSummaryValues":{"appName":"","Custom Column 1":"","Custom Column 2":""},"actionButtonPosition":"left","columnTypeProperties":{"appName":{},"Custom Column 1":{"padDecimal":true,"decimalPlaces":"2","showSeparators":true},"Custom Column 2":{"padDecimal":true,"decimalPlaces":"2","showSeparators":true}},"displayedDataIndices":null,"serverPaginationType":"limitOffsetBased","defaultSortDescending":false,"dynamicColumnSettings":null,"showFetchingIndicator":true,"_renderedDataWithTypes":null,"actionButtonColumnName":"Actions","actionButtonSelectsRow":true,"columnFrozenAlignments":{},"columnRestrictedEditing":{},"columnTypeSpecificExtras":{},"useDynamicColumnSettings":false,"_viewerColumnSummaryTypes":{},"columnMappersRenderAsHTML":{},"freezeActionButtonColumns":false,"_sortedDisplayedDataIndices":null,"disableRowSelectInteraction":false,"_reverseDisplayedDataIndices":null,"onCustomButtonPressQueryName":"","_columnsWithLegacyBackgroundColor":[],"applyDynamicSettingsToColumnOrder":true,"_reverseSortedDisplayedDataIndices":null,"_filteredSortedRenderedDataWithTypes":null},"container":"","createdAt":"2022-04-28T23:02:32.146Z","namespace":null,"position2":{"col":0,"row":1.6,"width":8,"height":17,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T18:20:12.551Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"appUsage":{"id":"appUsage","type":"datasource","style":null,"folder":"auditLogsQueries","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"query":"-- Parse the audit log to get app views and queries per app.\n-- Note that the Retool database refers to apps as \"pages.\"\n\nselect \n \"pageName\" as \"appName\",\n f.name as \"folderName\",\n sum(case when \"actionType\" = 'PAGE_VIEW' then 1 else 0 end) as pageviews,\n sum(case when \"actionType\" = 'QUERY_RUN' then 1 else 0 end) as queries\nfrom \n\taudit_trail_events e \n  inner join pages p on e.\"pageName\" = p.name\n  inner join folders f on p.\"folderId\" = f.id\nwhere \n\t(\"actionType\" = 'PAGE_VIEW' or \"actionType\" = 'QUERY_RUN')\n  and \"pageName\" ilike {{\"%\" + appInput.value + \"%\"}}\n  and (f.id = any({{folderSelect.value}}) or {{folderSelect.value.length === 0}})\n  and e.\"createdAt\" >= {{dateRange.value.start}}\n  and e.\"createdAt\" <= {{dateRange.value.end}}\ngroup by 1,2\norder by 3 desc\n","events":[],"rawData":null,"records":"","filterBy":"","metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"","queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":true,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":true,"bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-28T22:49:56.045Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:58:51.646Z","resourceName":"91949560-c1a0-41ad-99e2-9557982af823","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"gradient":{"id":"gradient","type":"datasource","style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"query":"// Define colors to be used for % columns, one per quartile.\nreturn {firstQuartile:\"#C9D9F8\", secondQuartile:\"#A4C2F4\", thirdQuartile:\"#6D9EEB\", fourthQuartile:\"#3B78D7\"}","events":[],"rawData":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"successMessage":"","changesetObject":"","errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","queryRefreshTime":"","runWhenPageLoads":true,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"notificationDuration":"","queryDisabledMessage":"","resourceNameOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","enableErrorTransformer":false,"queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2022-04-29T00:28:42.309Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T16:12:37.965Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateRange":{"id":"dateRange","type":"widget","style":{},"folder":"","screen":null,"subtype":"DateRangeWidget","tabIndex":null,"template":{"label":"","value":{"end":"{{moment()}}","start":"{{ moment().subtract(6, 'months')}}"},"events":{},"hidden":"","invalid":false,"loading":false,"maxDate":"","minDate":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"calendar","labelAlign":"left","labelWidth":"33","textBefore":"","formDataKey":"{{ self.id }}","textBetween":"-","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","endPlaceholder":"End date","formattedValue":"","labelWidthUnit":"%","customValidation":"","startPlaceholder":"Start date","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-29T18:51:32.135Z","namespace":null,"position2":{"col":8,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:13:00.761Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"quartiles":{"id":"quartiles","type":"function","style":null,"folder":"transformers","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"// Define quartile boundaries for data currently displayed in the % columns, used in determining background colors.\n\nconst viewsArray = {{appTable.columnMappers['Custom Column 1']}}\nconst queriesArray = {{appTable.columnMappers['Custom Column 2']}}\n\n// Taken from https://stackoverflow.com/a/48719875\nfunction quartile(data, q) {\n  data = arraySortNumbers(data);\n  var pos = ((data.length) - 1) * q;\n  var base = Math.floor(pos);\n  var rest = pos - base;\n  if( (data[base+1]!==undefined) ) {\n    return data[base] + rest * (data[base+1] - data[base]);\n  } else {\n    return data[base];\n  }\n}\n\nfunction arraySortNumbers(inputArray){\n  return inputArray.sort(function(a, b) {\n    return a - b;\n  });\n}\n\nconst views25 = quartile(viewsArray, .25)\nconst views50 = quartile(viewsArray, .5)\nconst views75 = quartile(viewsArray, .75)\nconst queries25 = quartile(queriesArray, .25)\nconst queries50 = quartile(queriesArray, .5)\nconst queries75 = quartile(queriesArray, .75)\n\nreturn {views25, views50, views75, queries25, queries50, queries75}"},"container":"","createdAt":"2022-04-28T23:55:12.566Z","namespace":null,"position2":null,"updatedAt":"2022-04-29T18:32:58.233Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"viewsChart":{"id":"viewsChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"App views","xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topViews}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"bottom","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":false,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:14:17.160Z","namespace":null,"position2":{"col":8,"row":1.6,"width":4,"height":8.2,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T20:15:01.508Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"folderSelect":{"id":"folderSelect","type":"widget","style":{},"folder":"","screen":null,"subtype":"MultiselectWidget2","tabIndex":null,"template":{"_ids":[],"data":"{{ folders.data }}","label":"","value":[],"events":{},"hidden":false,"labels":"{{ item.name }}","values":"{{ item.id }}","_labels":[],"_values":[],"invalid":false,"loading":false,"disabled":false,"itemMode":"dynamic","maxCount":null,"minCount":null,"readOnly":false,"required":false,"wrapTags":true,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":"","placeholder":"Select folders","tooltipText":"","_iconByIndex":[],"colorByIndex":"","emptyMessage":"","imageByIndex":"","labelCaption":"","showInEditor":false,"_colorByIndex":[],"_defaultValue":[],"_imageByIndex":[],"hiddenByIndex":"","labelPosition":"left","selectedItems":[],"_hiddenByIndex":[],"captionByIndex":"","disabledValues":[],"labelWidthUnit":"%","selectedLabels":[],"tooltipByIndex":"","_captionByIndex":[],"_tooltipByIndex":[],"disabledByIndex":"","selectedIndexes":[],"_disabledByIndex":[],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":"","_fallbackTextByIndex":[],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2022-04-28T23:04:01.497Z","namespace":null,"position2":{"col":4,"row":0.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-28T23:07:20.188Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"queriesChart":{"id":"queriesChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"Queries","xAxis":"{{formatDataAsObject(topApps.value.topQueries).appName}}","events":[],"layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topQueries)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topQueries)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topQueries}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"left","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":true,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:17:26.599Z","namespace":null,"position2":{"col":8,"row":9.799999999999999,"width":4,"height":8.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T19:11:59.057Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"2.89.12","appStyles":"","createdAt":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"isMobileApp":false,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"customDocumentTitle":"","preloadedAppJSLinks":[],"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":true,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"experimentalPerfFeatures":{"serverDepGraphEnabled":false,"batchCommitModelEnabled":false,"skipDepCycleCheckingEnabled":false},"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customDocumentTitleEnabled":false}}},{"type":"WIDGET_TEMPLATE_UPDATE","payload":{"plugin":{"id":"viewsChart","type":"widget","style":{},"folder":"","screen":null,"subtype":"PlotlyChartWidget","tabIndex":null,"template":{"data":"","title":"App views","xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","layout":"","chartType":"pie","groupByJS":"","xAxisMode":"dropdown","xAxisType":"default","dataseries":{"0":{"color":null,"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"color":null,"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"datasource":"","xAxisTitle":"","yAxisTitle":"","groupByMode":"dropdown","datasourceJS":"{{topApps.value.topViews}}","xAxisDropdown":"appName","selectedPoints":[],"groupByDropdown":"","legendAlignment":"bottom","xAxisTickFormat":"","yAxisTickFormat":"","shouldShowLegend":false,"isLayoutJsonDirty":false,"datasourceDataType":"array","datasourcePluginId":null,"onPointSelectQuery":"","datasourceInputMode":"javascript","isDataTemplateDirty":false,"isJsonTemplateDirty":false,"datasourcePluginType":"function","isStackSeriesEnabled":false,"skipDatasourceUpdate":false},"container":"","createdAt":"2022-04-29T16:14:17.160Z","namespace":null,"position2":{"col":8,"row":1.6,"width":4,"height":8.2,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2022-04-29T20:15:01.508Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"update":{"xAxis":"{{formatDataAsObject(topApps.value.topViews).appName}}","groupByJS":"","dataseries":{"0":{"label":"pageviews","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":true,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['pageviews']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"},"1":{"label":"queries","colors":{"0":"#033663","1":"#247BC7","2":"#55A1E3","3":"#DAECFC","4":"#EECA86","5":"#E9AB11","6":"#D47E2F","7":"#C15627","8":"#224930","9":"#238146","10":"#55A874"},"visible":false,"chartType":"pie","datasource":"{{formatDataAsObject(topApps.value.topViews)['queries']}}","hovertemplate":"<b>%{x}</b><br>%{fullData.name}: %{y}<extra></extra>","aggregationType":"sum"}},"groupByMode":"dropdown","xAxisDropdown":"appName","groupByDropdown":"","datasourceDataType":"array","isStackSeriesEnabled":false},"widgetId":"viewsChart"},"isUserTriggered":true}],"gitSha":null,"checksum":null,"createdAt":"2022-04-29T20:45:33.768Z","updatedAt":"2022-04-29T20:45:33.768Z","pageId":204,"userId":57,"branchId":null},"modules":{}}